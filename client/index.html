<html>
<head>
    <meta charset="utf-8" />
    <title>Battle Pack Draft</title>
    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
</head>
<body>
<canvas id='ctx' width="1280" height="900"></canvas>
<script>
  var socket = io();
  var context = document.getElementById('ctx').getContext('2d');

  socket.on('updateData', function(data){
    var packX = 15;
    var packY = 65;
    var deckX = 500;
    var deckY = 65;
    context.clearRect(0, 0, 1280, 900);
    for (var i in data.currentPack){
      context.fillText(i, packX - 10, packY);
      context.fillText(data.currentPack[i], packX, packY);
      packY = packY + 30;
    }
    context.fillText('Deck:', deckX, deckY - 15);
    for (var j in data.deck){
      context.fillText(data.deck[j], deckX, deckY);
      deckY = deckY + 15;
    }
  });
  var code;
  document.onkeydown = function(event){
    if (event.key !== undefined) {code = event.key;}
    else if (event.keyIdentifier !== undefined) {code = event.keyIdentifier;}
    else if (event.keyCode !== undefined) {code = event.keyCode;}
    console.log('keydown detected with code: ', code);
    if (code === '0'){
      socket.emit('cardChosen', { cardChosen: 0})
    }
    else if (code === '1'){
      socket.emit('cardChosen', { cardChosen: 1})
    }
    else if (code === '2'){
      socket.emit('cardChosen', { cardChosen: 2})
    }
    else if (code === '3'){
      socket.emit('cardChosen', { cardChosen: 3})
    }
    else if (code === '4'){
      socket.emit('cardChosen', { cardChosen: 4})
    }
    else if (code === '5'){
      socket.emit('cardChosen', { cardChosen: 5})
    }
    else if (code === '6'){
      socket.emit('cardChosen', { cardChosen: 6})
    }
    else if (code === '7'){
      socket.emit('cardChosen', { cardChosen: 7})
    }
    else if (code === '8'){
      socket.emit('cardChosen', { cardChosen: 8})
    }
    else if (code === '9'){
      socket.emit('cardChosen', { cardChosen: 9})
    }
  };
</script>
</body>
</html>